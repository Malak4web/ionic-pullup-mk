!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@ionic/angular"),require("@angular/platform-browser"),require("hammerjs")):"function"==typeof define&&define.amd?define("ionic-pullup",["exports","@angular/core","@ionic/angular","@angular/platform-browser","hammerjs"],e):e((t=t||self)["ionic-pullup"]={},t.ng.core,t.angular,t.ng.platformBrowser,t.hammerjs)}(this,(function(t,e,o,i,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};var a=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"lib-ionic-pullup-tab",template:"<ng-content></ng-content>",styles:[":host{z-index:1000;display:flex;justify-content:center;position:relative;width:120px;height:10px;background:var(--ion-color-primary);color:#fff;border-radius:10px 10px 0 0;margin:0 auto}"]}]}],t}();var s={Collapsed:0,Expanded:1,Minimized:2};s[s.Collapsed]="Collapsed",s[s.Expanded]="Expanded",s[s.Minimized]="Minimized";var l={Hide:0,Expand:1};l[l.Hide]="Hide",l[l.Expand]="Expand";var h=function(){function t(t,o,i){var n,r;this.platform=t,this.renderer=o,this.hammerConfig=i,this.stateChange=new e.EventEmitter,this.toolbarTopMargin=0,this.minBottomVisible=0,this.expanded=new e.EventEmitter,this.collapsed=new e.EventEmitter,this.minimized=new e.EventEmitter,this.dragged=new e.EventEmitter,this.footerMeta={height:0,posY:0,lastPosY:0},this.currentViewMeta={bottomSpace:screen.height-window.innerHeight},this.initialState=null!==(n=this.initialState)&&void 0!==n?n:s.Collapsed,this.defaultBehavior=null!==(r=this.defaultBehavior)&&void 0!==r?r:l.Expand}return t.prototype.ngOnInit=function(){var t=this;window.addEventListener("orientationchange",(function(){t.updateUI(),t.collapse()})),this.platform.resume.subscribe((function(){t.updateUI(),t.collapse()})),this.footerMeta.toolbarLowerBoundary=this.dockable?this.minBottomVisible:0},t.prototype.ngAfterContentInit=function(){this.computeDefaults(),this.state=s.Collapsed,this.updateUI()},Object.defineProperty(t.prototype,"expandedHeight",{get:function(){return window.innerHeight-this.currentViewMeta.toolbarHeight-this.currentViewMeta.tabsHeight},enumerable:!0,configurable:!0}),t.prototype.computeDefaults=function(){var t=this;setTimeout((function(){t.footerMeta.toolbarDefaultHeight=t.childFooter.nativeElement.offsetHeight,t.findIonicComponentsInPage(),t.dragElements.forEach((function(e){t.hammerConfig.buildHammer(e.el).on("pan panstart panend",(function(e){t.onPan(e)}))}))}),300)},t.prototype.computeHeights=function(){this.footerMeta.height=this.expandedHeight,this.footerMeta.toolbarDefaultExpandedPosition=-this.footerMeta.height+this.footerMeta.toolbarDefaultHeight+this.minBottomVisible,this.footerMeta.toolbarUpperBoundary=this.footerMeta.height-this.footerMeta.toolbarDefaultHeight-this.minBottomVisible,this.renderer.setStyle(this.childFooter.nativeElement,"height",this.footerMeta.height+"px"),this.renderer.setStyle(this.childFooter.nativeElement,"top",window.innerHeight-this.footerMeta.toolbarDefaultHeight-this.currentViewMeta.tabsHeight-this.minBottomVisible+"px"),this.updateIonContentHeight()},t.prototype.updateUI=function(t){var e=this;void 0===t&&(t=!1),this.childFooter&&(setTimeout((function(){e.computeHeights()}),300),this.renderer.setStyle(this.childFooter.nativeElement,"transition","none"))},t.prototype.expand=function(){this.footerMeta.lastPosY=this.footerMeta.toolbarDefaultExpandedPosition,this.updateIonContentHeight(this.minBottomVisible-this.footerMeta.lastPosY),this.renderer.setStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),this.renderer.setStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),this.renderer.setStyle(this.childFooter.nativeElement,"transition","300ms ease-in-out"),this.expanded.emit(null)},t.prototype.collapse=function(t){var e=this;void 0===t&&(t=!1),this.childFooter&&(this.footerMeta.lastPosY=0,this.renderer.setStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),this.renderer.setStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),setTimeout((function(){return e.updateIonContentHeight(e.minBottomVisible-e.footerMeta.lastPosY)}),300),t||this.collapsed.emit(null))},t.prototype.minimize=function(){this.footerMeta.lastPosY=this.footerMeta.height,this.renderer.setStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),this.renderer.setStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this.footerMeta.lastPosY+"px, 0)"),this.minimized.emit(null)},t.prototype.onTap=function(t){t.preventDefault(),this.state===s.Collapsed?this.defaultBehavior===l.Hide?this.state=s.Minimized:this.state=s.Expanded:this.state===s.Minimized?this.defaultBehavior===l.Hide?this.state=s.Collapsed:this.state=s.Expanded:this.state=this.initialState===s.Minimized?s.Minimized:s.Collapsed},t.prototype.onPan=function(t){switch(this.renderer.setStyle(this.childFooter.nativeElement,"transition","none"),t.preventDefault(),t.type){case"pan":this.footerMeta.posY=t.deltaY+this.footerMeta.lastPosY,this.footerMeta.posY=this.footerMeta.posY>this.footerMeta.toolbarLowerBoundary?this.footerMeta.toolbarLowerBoundary:Math.abs(this.footerMeta.posY)>this.footerMeta.toolbarUpperBoundary?this.footerMeta.toolbarDefaultExpandedPosition:this.footerMeta.posY,this.updateIonContentHeight(this.minBottomVisible-this.footerMeta.posY),this.renderer.setStyle(this.childFooter.nativeElement,"-webkit-transform","translate3d(0, "+this.footerMeta.posY+"px, 0)"),this.renderer.setStyle(this.childFooter.nativeElement,"transform","translate3d(0, "+this.footerMeta.posY+"px, 0)");break;case"panend":this.renderer.setStyle(this.childFooter.nativeElement,"transition","300ms ease-in-out"),this.footerMeta.lastPosY=this.footerMeta.posY,this.updateIonContentHeight(this.minBottomVisible-this.footerMeta.lastPosY);var e=this.dragElements.first;this.dragged.emit({delta:this.footerMeta.lastPosY,toolbarAbsolutePosition:e?e.el.getBoundingClientRect():null})}},t.prototype.ngOnChanges=function(t){var e,o,i,n,r=this;if(!(null!==(o=null===(e=t.state)||void 0===e?void 0:e.firstChange)&&void 0!==o?o:(null===(i=t.state)||void 0===i?void 0:i.currentValue)===(null===(n=t.state)||void 0===n?void 0:n.previousValue))){switch(this.state){case s.Collapsed:this.collapse();break;case s.Expanded:this.expand();break;case s.Minimized:this.minimize()}window.setTimeout((function(){r.stateChange.emit(r.state)}))}},t.prototype.findIonicComponentsInPage=function(){if(this.footerMeta.ionContentRef=this.childFooter.nativeElement.querySelector("ion-content"),this.currentViewMeta.tabsRef=document.querySelector("ion-tab-bar"),this.currentViewMeta.tabsHeight=this.currentViewMeta.tabsRef?this.currentViewMeta.tabsRef.offsetHeight:0,this.toolbarTopMargin)this.currentViewMeta.toolbarHeight=this.toolbarTopMargin;else{var t=document.querySelector("ion-router-outlet");if(t){var e=t.querySelector("ion-header");e?(this.currentViewMeta.toolbarRef=e.querySelector("ion-toolbar"),this.currentViewMeta.toolbarHeight=this.currentViewMeta.toolbarRef.clientHeight):this.currentViewMeta.toolbarHeight=0}}},t.prototype.updateIonContentHeight=function(t){if(this.footerMeta.ionContentRef){var e=t?t+"px":this.minBottomVisible>0?this.minBottomVisible+"px":"100%";this.renderer.setStyle(this.footerMeta.ionContentRef,"max-height",e)}},t.decorators=[{type:e.Component,args:[{selector:"lib-ionic-pullup",template:'<div class="footer" #footer>\n  <ng-content></ng-content>\n</div>',changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[".footer{left:0;right:0;position:fixed;z-index:999}"]}]}],t.ctorParameters=function(){return[{type:o.Platform},{type:e.Renderer2},{type:i.HammerGestureConfig,decorators:[{type:e.Inject,args:[i.HAMMER_GESTURE_CONFIG]}]}]},t.propDecorators={state:[{type:e.Input}],stateChange:[{type:e.Output}],initialState:[{type:e.Input}],defaultBehavior:[{type:e.Input}],toolbarTopMargin:[{type:e.Input}],minBottomVisible:[{type:e.Input}],dockable:[{type:e.Input}],expanded:[{type:e.Output}],collapsed:[{type:e.Output}],minimized:[{type:e.Output}],dragged:[{type:e.Output}],childFooter:[{type:e.ViewChild,args:["footer",{static:!0}]}],dragElements:[{type:e.ContentChildren,args:["ionDragFooter"]}]},t}();var p=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.overrides={pan:{direction:n.DIRECTION_VERTICAL}},e}return function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(o,t),o.decorators=[{type:e.Injectable}],o}(i.HammerGestureConfig);var d=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[h,a],imports:[],exports:[h,a],schemas:[e.CUSTOM_ELEMENTS_SCHEMA],providers:[{provide:i.HAMMER_GESTURE_CONFIG,useClass:p}]}]}],t}();t.IonPullUpFooterBehavior=l,t.IonPullUpFooterState=s,t.IonicPullupComponent=h,t.IonicPullupComponentTabComponent=a,t.IonicPullupModule=d,t.MyHammerConfig=p,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ionic-pullup.umd.min.js.map